{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '17166399-e5f7f2e62df2b422af7ff4cab';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n\nexport async function getImagesByQuery(query, page = 1) {\n    const perPage = 15;\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${page}`;\n\n    try {\n        const response = await axios.get(url);\n        const { hits, totalHits } = response.data;\n        return { hits, totalHits };\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\nexport function createGallery(images) {\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `\n      <a href=\"${largeImageURL}\" class=\"gallery-item photo-card\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <div class=\"info-block\">\n            <p class=\"label\">Likes</p>\n            <p class=\"value\">${likes}</p>\n          </div>\n          <div class=\"info-block\">\n            <p class=\"label\">Views</p>\n            <p class=\"value\">${views}</p>\n          </div>\n          <div class=\"info-block\">\n            <p class=\"label\">Comments</p>\n            <p class=\"value\">${comments}</p>\n          </div>\n          <div class=\"info-block\">\n            <p class=\"label\">Downloads</p>\n            <p class=\"value\">${downloads}</p>\n          </div>\n        </div>\n      </a>\n    `;\n  }).join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.classList.add('hidden');\n}","import { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet searchForm, loadMoreBtn;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    searchForm = document.querySelector('.form');\n    loadMoreBtn = document.querySelector('.load-more');\n\n    if (searchForm) {\n        searchForm.addEventListener('submit', onSearchSubmit);\n    } else {\n        console.error('.form Not found');\n    }\n\n    if (loadMoreBtn) {\n        loadMoreBtn.addEventListener('click', onLoadMoreClick);\n    } else {\n        console.error('.load-more Not found');\n    }\n    // Сховати кнопку \"Load more\" при старті\n    loadMoreBtn.classList.add('hidden');\n});\n\nlet currentQuery = '';\nlet currentPage = 1;\nconst perPage = 15;\n\nasync function onSearchSubmit(event) {\n    event.preventDefault();\n    clearGallery();\n    hideLoadMoreButton();\n\n    const searchQuery = event.currentTarget.elements.searchQuery;\n    if (!searchQuery || !searchQuery.value.trim()) {\n        iziToast.warning({\n            title: 'Attention',\n            message: 'Please enter a search query',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    currentQuery = searchQuery.value.trim();\n    currentPage = 1;\n    await fetchImages();\n}\n\nasync function onLoadMoreClick() {\n    currentPage += 1;\n    await fetchImages();\n}\n\nasync function fetchImages() {\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        if (!data || !data.hits || data.hits.length === 0) {\n            iziToast.info({\n                title: 'Інформація',\n                message: 'На жаль, за вашим запитом нічого не знайдено.',\n                position: 'topRight',\n            });\n            return;\n        }\n\n        createGallery(data.hits);\n\n        const totalPages = Math.ceil(data.totalHits / perPage);\n        if (currentPage >= totalPages) {\n            hideLoadMoreButton();\n            iziToast.info({\n                title: 'Кінець результатів',\n                message: 'Ви досягли кінця результатів пошуку.',\n                position: 'topRight',\n            });\n        } else {\n            showLoadMoreButton();\n        }\n\n        const galleryItem = document.querySelector('.gallery-item');\n        if (galleryItem) {\n            const { height: cardHeight } = galleryItem.getBoundingClientRect();\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth',\n            });\n        }\n    } catch (error) {\n        console.error('Помилка під час отримання даних: ', error);\n        iziToast.error({\n            title: 'Помилка',\n            message: 'Сталася помилка при завантаженні зображень. Спробуйте ще раз.',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n    }\n}"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","url","response","axios","hits","totalHits","error","galleryContainer","loadMoreBtn","loader","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","searchForm","onSearchSubmit","onLoadMoreClick","currentQuery","currentPage","perPage","event","searchQuery","iziToast","fetchImages","data","totalPages","galleryItem","cardHeight"],"mappings":"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"}